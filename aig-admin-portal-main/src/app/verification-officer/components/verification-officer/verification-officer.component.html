<!-- Verification Officer -->
<div class="table_container content d-flex flex-column justify-content-between h-100" data-number="7">
    <div>
        <div class="Officer_table">
            <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
                <h4 class="fs-20 fw-600 dark mb-0">Verification Officer</h4>
                <button class="select-btn gap_6" data-bs-target="#addofficer" data-bs-toggle="modal" *appHasPermission="{ title: permissionTitle.VERIFICATION_OFFICERS, accessType: permissionType.CREATE }"
                    (click)="clearForm()"><img src="assets/images/svg_img/plus.svg">Add
                    Officer</button>
            </div>
        </div>
        <div class="table-pagination page-nav empty"
            *ngIf="verificationOfficers.length==0  &&(loaderService.isDataLoaded |async)">
            <h4 class="primary mb-0 fs-26 fw-600">No Verification Officers </h4>
        </div>
        <div class="table-responsive add-table-data" *ngIf="verificationOfficers.length!=0">
            <table class="table mb-0" id="dtHorizontalExample" cellspacing="0" width="100%">
                <thead>
                    <tr class="table_heading">
                        <th scope="col" class="fs-14 fw-500 theading" style="width: 15%;">Name</th>
                        <th scope="col" class="fs-14 fw-500 theading" style="width: 15%;">Email address</th>
                        <th scope="col" class="fs-14 fw-500 theading" style="width: 10%;">Phone number</th>
                        <th scope="col" class="fs-14 fw-500 theading" style="width: 10%;">LGA Code</th>
                        <th scope="col" class="fs-14 fw-500 theading" style="width: 20%;">Address</th>
                        <th scope="col" class="fs-14 fw-500 theading status_img" style="width: 10%;">Status <img
                                *ngIf="sortIsActive==sortStatus.ALL" src="assets/images/temp_img/down-arrow.png"
                                (click)="sortByStatus(sortStatus.ALL)">
                            <img *ngIf="sortIsActive==sortStatus.ACTIVE" src="assets/images/temp_img/down-arrow.png"
                                (click)="sortByStatus(sortStatus.ACTIVE)">
                            <img *ngIf="sortIsActive==sortStatus.IN_ACTIVE" src="assets/images/temp_img/down-arrow.png"
                                (click)="sortByStatus(sortStatus.IN_ACTIVE)">
                        </th>
                        <th scope="col" class="fs-14 fw-500 theading" style="width: 10%;">Action</th>
                    </tr>
                </thead>
                <tbody class="bg_light">
                    <tr *ngFor="let officer of verificationOfficers">
                        <td>
                            <div class="d-flex align-items-center cur-point"
                                (click)="navigateToComponent(officer.userId)">
                                <img [src]="officer.profilePicture || appUtil.DEFAULT_IMAGE" class="address_icon">
                                <div class="varification_officer">
                                    <h5 class="fs-14 fw-500 black mb-0 mx-0 ms-2">{{officer.firstName+'
                                        '+officer.lastName}}
                                    </h5>
                                    <h4 class="fs-14 fw-500 grey2 mb-0 mx-0 ms-2">{{officer.userName}}</h4>
                                </div>
                            </div>
                        </td>
                        <td class="fs-14 fw-500 info">{{officer.email}}</td>
                        <td class="fs-14 fw-500 info">{{officer.phoneNumber}}</td>

                        <td class="fs-14 fw-500 info">{{officer.lgaName}}</td>
                        <!-- <td class="fs-14 fw-500 info">{{officer.address}}</td> -->
                        
                        <td class="fs-14 fw-500 info">
                            <div [ngClass]="{ 'truncate': !(officer.userId==id) , 'expanded': officer.userId==id }">
                                {{ officer.address || (officer.address.length || 0) <= 64 ? officer.address :
                                    (officer.userId !=id ? (officer.address | slice:0:64) + '...' : (officer.address ))
                                    }}</div>
                                    <a *ngIf="officer.address && officer.address.length > 64"
                                        class="text-primary d-block mt-1" href="javascript:void(0)"
                                        (click)="setId(officer.userId)">
                                        {{ (officer.userId==id ) ? 'Show Less' : 'Show More' }}
                                    </a>
                        </td>
                        <td class="fs-14 fw-500 info">
                            <label class="switch" *appHasPermission="{ title: permissionTitle.VERIFICATION_OFFICERS, accessType: permissionType.UPDATE }">
                                <input type="checkbox" [checked]="officer.isActive"
                                    (click)="updateOfficerStatus(officer.isActive,officer.userId)">
                                <span class="slider round"></span>
                            </label>
                        </td>
                        <td>
                            <div class="d-flex align-items-center gap-3">
                                <a (click)="navigateToComponent(officer.userId)" *appHasPermission="{ title: permissionTitle.VERIFICATION_OFFICERS, accessType: permissionType.UPDATE }"><img
                                        src="assets/images/svg_img/edit-icon.svg" class="add_icons"></a>
                                <a (click)="deleteId = officer.userId"><img src="assets/images/svg_img/Trash.svg"  *appHasPermission="{ title: permissionTitle.VERIFICATION_OFFICERS, accessType: permissionType.DELETE }"
                                        data-bs-target="#delete-modal" data-bs-toggle="modal"></a>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <nav aria-label="Page navigation example" class="table-pagination"
        *ngIf=" pageManager.totalElements> pageRequest.pageSize">
        <p class="text_dark fs-16 fw-600 mb-0 showing-entity">Showing {{pageManager.pageNumber*pageManager.pageSize+1}}
            to
            {{(pageManager.pageNumber*pageManager.pageSize)+pageManager.numberOfElements_currentPage}} of
            {{pageManager.totalElements}} entries</p>
        <ul class="pagination mb-0">
            <li class="p-2  mx-2 ms-0"><a class="fs-16 fw-500 secondary"
                    [ngClass]="pageManager.first?'theading disable-click ':' cur-point'"
                    (click)="manageNext(false)">Previous</a></li>
            <li class="page-item" *ngFor="let b of pageManager.showButtons ;" (click)="setPage(b)"><a class="page-link"
                    [ngClass]="pageRequest.pageNo==b-1?'active':''" id="{{b}}" href="javascript:void(0)">{{b}}</a>
            </li>
            <li class="" *ngIf="pageManager.totalPages>pageManager.showButtons[pageManager.showButtons.length-1]"><a
                    class="page-link" href="javascript:void(0)"
                    (click)="setPage(pageManager.showButtons[pageManager.showButtons.length-1]+1)">...</a></li>

            <li class="p-2  mx-0 ms-2"><a class="fs-16 fw-500 secondary" href="javascript:void(0)"
                    [ngClass]="pageManager.last?'theading disable-click':' cur-point'"
                    (click)="manageNext(true)">Next</a>
            </li>
        </ul>
    </nav>

</div>

<!-- Model Start -->

<div class="modal fade" id="delete-modal" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered ">
        <div class="modal-content">
            <div class="modal-header p-0 justify-content-center">
                <div class="mb-4">
                    <div class="d-flex justify-content-center mb-4">
                        <img class="assign_icon" src="assets/images/svg_img/delete.svg" height="80" width="80">
                    </div>
                    <h3 class="fs-22 fw-600 text_small mb_12" id="exampleModalToggleLabel2">Delete
                        User </h3>
                    <h3 class="fs-16 fw-400 info mb-0 text-center">Are you sure you want to delete this
                        User? This action is irreversible.</h3>
                </div>
            </div>

            <div class="modal-footer p-0 justify-content-center">
                <div class="gap_20 d-flex">
                    <button class="btn_lg2 fs-16 fw-500 br_12" data-bs-dismiss="modal" aria-label="Close"
                        id="close-verification-officer-modal">Cancel</button>
                    <button class="btn_lg fs-16 fw-500 br_12" (click)="deleteByOfficerId()">Delete</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Officer MODAL -->
<div class="modal fade" id="addofficer" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <h2 class="fs-18 fw-600 primary mb-4" id="exampleModalToggleLabel2">Add Officer profile
            </h2>
            <div class="modal-header p-0 justify-content-center">
                <div class="mb-4 position-relative  d-flex justify-content-center">

                    <input id="file1" type="file" (change)="setImage($event)" class="d-none" accept="image/*">
                    <img class="modal_profile" id="output1" [src]="imagePreview?imagePreview:appUtil.DEFAULT_IMAGE">
                    <label class="-label" for="file1">

                        <a class="secondary fs-16 fw-500  edit_img d-flex justify-content-center align-items-center">
                            <i class="fi fi-sr-pencil white lh-0 fs-12"></i>
                        </a>
                    </label>

                </div>
                
            </div>
             <div *ngIf="addForm.get('profilePicture')?.errors?.['invalidType']" class="error text-danger mt-2">
                  Only JPG and PNG images are allowed.
                </div>
<div *ngIf="addForm.get('profilePicture')?.errors?.['maxSizeExceeded']" class="error text-danger mt-2">
  File size too large. Maximum allowed size is 2 MB.
</div>
            <div class="modal-body p-0">
                <div class="mb-4">
                    <form [formGroup]="addForm">
                        <div class="row gy-3">
                            <div class="col-md-12">
                                <label for="" class="black fs-15 fw-400 mb-2">First Name</label>
                                <input type="text" class="form-control profile_input2" formControlName="firstName"
                                    [(ngModel)]="verificationOfficer.firstName" name="firstName"
                                    placeholder="Enter First Name">
                                <div *ngIf="checkFieldValid('firstName',addForm)" class="error error-font  validation">
                                    <p>{{constants.INVALID_FIELD}}</p>
                                </div>

                            </div>
                            <div class="col-md-12">
                                <label for="" class="black fs-15 fw-400 mb-2">Last Name</label>
                                <input type="text" class="form-control profile_input2" formControlName="lastName"
                                    [(ngModel)]="verificationOfficer.lastName" name="lastName"
                                    placeholder="Enter Last Name">
                                <div *ngIf="checkFieldValid('lastName',addForm)" class="error error-font  validation">
                                    <p>{{constants.INVALID_FIELD}}</p>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label for="" class="black fs-15 fw-400 mb-2">User ID</label>
                                <input type="text" class="form-control profile_input2" formControlName="userName"
                                    [(ngModel)]="verificationOfficer.userName" name="userName"
                                    placeholder="Enter Username">
                                <div *ngIf="checkFieldValid('userName',addForm)" class="error error-font  validation">
                                    <p>{{constants.INVALID_FIELD}}</p>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label for="" class="black fs-15 fw-400 mb-2">Phone Number</label>
                                <input type="tel" class="form-control profile_input2" formControlName="phoneNumber"
                                    [(ngModel)]="verificationOfficer.phoneNumber" name="phoneNumber" id="phoneInput" oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                    placeholder="Enter Phone Number">
                                <!-- <div *ngIf="addForm.get('phoneNumber')?.hasError('required') && addForm.get('phoneNumber')?.touched"
                                    class="error error-font  validation">
                                    <p>{{constants.INVALID_FIELD}}</p>
                                </div> -->
                                <div *ngIf="addForm.get('phoneNumber')?.touched && addForm.get('phoneNumber')?.invalid"
                                    class="error error-font validation">
                                    <p *ngIf="addForm.get('phoneNumber')?.hasError('required')">{{
                                        constants.INVALID_FIELD }}</p>
                                    <p *ngIf="addForm.get('phoneNumber')?.hasError('pattern')">Invalid  phone
                                        number </p>
                                </div>


                            </div>
                            <div class="col-md-12">
                                <label for="" class="black fs-15 fw-400 mb-2">Email Address</label>
                                <input type="email" class="form-control profile_input2" formControlName="email"
                                    [(ngModel)]="verificationOfficer.email" name="email"
                                    placeholder="Enter Email Address">
                                <div *ngIf="addForm.get('email')?.hasError('required') && addForm.get('email')?.touched"
                                    class="error error-font  validation">
                                    <p>{{constants.INVALID_FIELD}}</p>
                                </div>


                                <div *ngIf="addForm.get('email')?.hasError('invalidEmail') && addForm.get('email')?.touched"
                                    class="error error-font  validation">
                                    <p>{{constants.INVALID_EMAIL}}</p>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class=" mb-2 d-flex align-items-center">
                                    <label for="" class="black fs-15 fw-400">Address Of Operation</label>
                                    <span
                                        tooltip="Based on this Address requests will be assigned for area within 15 km">
                                        <i class="fi fi-sr-info primary lh-0 mx-0 ms-2 fs-14">
                                        </i>
                                    </span>
                                </div>
                                <input type="text" class="form-control profile_input2" formControlName="address"
                                    name="address" id="input" (focus)="addressAutoComplete('input')"
                                    [(ngModel)]="verificationOfficer.address" placeholder="Enter a location">
                                <div *ngIf="checkFieldValid('address',addForm)" class="error error-font  validation">
                                    <p>{{constants.INVALID_FIELD}}</p>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label for="" class="black fs-15 fw-400 mb-2">State</label>
                                <div class="wrapper" id="wrapper">
                                    <div class="select-btn profile_input2 " id="wr1">
                                        <span class="dark">{{!verificationOfficer.state.name?'Select
                                            State':verificationOfficer.state.name}}</span>
                                        <i class="uil uil-angle-down"></i>
                                    </div>
                                    <div class="content">
                                        <div class="search">
                                            <!-- <i class="uil uil-search"></i> -->
                                            <input spellcheck="false" type="text" placeholder="Search" type="text"
                                                class="form-control profile_input2" formControlName="state"
                                                [(ngModel)]="search" (keyup)="searching()" name="state"
                                                placeholder="Enter State ">
                                        </div>
                                        <ul class="options" style="position: inherit;width: 100%;">
                                            <li class="" *ngFor="let state of stateList" (click)="modelDissmiss('wr1')"
                                                (click)="getLgaInfoOfState(state)">{{state.name }}</li>
                                            <li class="" *ngIf="stateList.length<=0">No States Found</li>
                                        </ul>
                                    </div>
                                    <div *ngIf="checkFieldValid('state',addForm) " class="error error-font  validation">
                                        <p>{{constants.INVALID_FIELD}}</p>
                                    </div>

                                </div>
                            </div>
                            <div class="col-md-12">
                                <label for="" class="black fs-15 fw-400 mb-2">LGA Name</label>
                                <div class="wrapper" id="wrapper2">
                                    <div class="select-btn profile_input2 select-btn-2" id="wr2">
                                        <span class="dark">{{!verificationOfficer.lgaName?'Select Lga
                                            Name':verificationOfficer.lgaName}}</span>
                                        <i class="uil uil-angle-down"></i>
                                    </div>
                                    <div class="content">
                                        <div class="search">
                                            <!-- <i class="uil uil-search"></i> -->
                                            <input spellcheck="false" type="text" placeholder="Search" type="text"
                                                class="form-control profile_input" formControlName="lgaName"
                                                [(ngModel)]="lgaSearch" (keyup)="searchingLgaName()" name="lgaName"
                                                placeholder="Enter LGA Name">
                                        </div>

                                        <ul class="options" style="position: inherit;width: 100%;">
                                            <li class="" (click)="modelDissmiss('wr2')"
                                                *ngFor="let lga of lgaSearchingList" (click)="setLgaProperty(lga)">
                                                {{lga.lgaName }}</li>
                                        </ul>

                                    </div>
                                </div>
                                <div *ngIf="checkFieldValid('lgaName',addForm)" class="error error-font  validation">
                                    <p>{{constants.INVALID_FIELD}}</p>

                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class=" position-relative">
                                    <label for="" class="black fs-15 fw-400 mb-2">Password</label>

                                    <input type="password" #i1 class="form-control  profile_input2"
                                        formControlName="password" [(ngModel)]="verificationOfficer.password"
                                        name="password" placeholder="Confirm Password">
                                    <i (click)="changePasswordIcon(i1)"
                                        [ngClass]="i1.type==='text'?'fi fi-rr-eye eye_icon cur-point':'fi fi-rr-eye-crossed eye_icon cur-point'"></i>
                                </div>
                            </div>

                            <div *ngIf="addForm.get('password')?.hasError('required') && addForm.get('password')?.touched"
                                class="error error-font  validation">
                                <p>{{constants.INVALID_FIELD}}</p>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer p-0">
                <div class="gap_20 d-flex">
                    <button class="btn_lg2 fs-16 fw-500 br_10" data-bs-dismiss="modal" id="cancel-add"
                        aria-label="Close">Cancel</button>
                    <button class="btn_lg fs-16 fw-500 br_10" (click)="addVerificationOfficer()"
                        [ngClass]="loading?'disable':''">{{!loading?'Add':''}}
                        <div class="spinner-border text-light" *ngIf="loading" role="status">
                            <span class="sr-only"></span>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Add Officer MODAL END -->